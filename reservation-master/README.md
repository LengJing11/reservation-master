# `登录功能介绍`

> 登录角色：学员、教练、管理员
>
> 登录账号要求：
>
> 1. 学员与教练用户名采用身份证号进行登录，身份证号使用正则表达式进行验证
> 2. 管理员用户名则没有限制，不为空即可
> 3. 关于密码拥有独立的验证规则（正则表达式：密码必须包含子母和数字且在6-16位之间）
>
> 其他要求：
>
> 1. 若用户在未登录的情况下进入其他页面，则会跳转到登录页面，只有当本地存储中有登录账号信息才可以
> 2. 在本地存储有账号信息的前提下进行无登录跳转，会进行登录角色与跳转页面的判断（管理员只能跳转到管理员页面，其他角色同样），若一致则进行跳转，不一致则跳转到登录页面
> 3. 在跳转成功后则会进行一级权限的验证，没有权限则无法访问该页面
> 4. 在路由跳转成功后，会修改页面的标题

# 学员端功能介绍

## 个人信息

> 展示学员的个人信息，如身份证号、电话、申请车型、教练等
>
> 学员可以修改自身的电话和住址，电话采用正则表达式进行验证
>
> 若没有点击修改信息按钮则无法进行修改
>
> 在修改信息却没有保存的情况下取消修改则会重新获取信息，修改的信息无效

## 账户信息

> 展示登录学员的账户信息，用户名、密码和创建日期
>
> 学员可以修改密码（正则表达式）
>
> 若没有点击修改密码按钮则无法进行修改
>
> 在修改信息却没有保存的情况下取消修改则会重新获取信息，修改的信息无效

## 教练信息

> 学员可以查看自身教练的信息，如姓名、电话、教练等

## 预约练车时间

> 若学员的教练没有进行练车时间安排，则显示空白信息，学员无法进行预约
>
> 若学员的教练有进行练车时间安排则显示教练练车时间安排信息，同时学员可以根据安排信息进行预约
>
> 学员的预约信息包括`预约日期`和`预约开始时间`
>
> 1.  预约日期：只能选择今天以后的日期（不包括今天），且必须是在教练安排的日期范围内
> 2.  预约开始时间：根据教练安排的时间进行选择，但不能选择结束时间（可能会有，根据教练时间安排而定）
> 3.  学员可以对自己的时间预约进行修改，教练确认预约后不可更改，只有预约日期已过才能更改即再次预约
> 4. 学员可以删除自己的练车预约，但如果教练已经确认预约则不能删除预约，只有预约日期已过才能进行删除
>
> 要求：
>
> 1. 只有点击开始预约按钮才可以进行预约
> 2. 学员提交预约后还需教练进一步确认，确认后才可以进行练车

## 预约情况查询

> 采用时间线的方式进行显示，若学员没有预约，则显示提醒学员预约的空白信息
>
> 若学员有预约则显示学员预约和学员提交预约时间信息
>
> 若教练确认预约，还会显示教练确认预约时间信息
>
> 若预约时间已过，还会显示预约结束（自动判断预约时间是否已过），同时显示学员可以再次预约

# 教练端功能介绍

## 个人信息

> 展示教练的个人信息，如身份证号、电话、教练等
>
> 教练可以修改自身的电话，电话采用正则表达式进行验证
>
> 若没有点击修改电话按钮则无法进行修改
>
> 在修改信息却没有保存的情况下取消修改则会重新获取信息，修改的信息无效

## 账户信息

> 展示登录教练的账户信息，用户名、密码和创建日期
>
> 教练可以修改密码（正则表达式）
>
> 若没有点击修改密码按钮则无法进行修改
>
> 在修改信息却没有保存的情况下取消修改则会重新获取信息，修改的信息无效

## 学员管理

> 可以查看教练带领的学员信息，同时可以分别查看已领证与未领证的学员（过滤）
>
> 教练可以对学员进行搜索（根据学员姓名），
>
> 上报教学进度：可选项有：科目一、科目二、科目三、科目四，会影响到教练教学进度统计

## 车辆查看

> 可以查看所有车辆信息，包括已预约和未预约的
>
> 教练可以对车辆进行搜索，根据车牌号进行搜索

## 车辆预定

> 显示未预约车辆信息，供教练预约使用，若教练已预约车辆则不能再次预约
>
> 教练可以根据车牌号搜索车辆
>
> 预约车辆：点击车辆表格中的记录即可进行预约
>
> 查看已预约车辆信息：显示教练预约车辆信息，未预约则弹出信息提示
>
> 取消预约：取消预约车辆信息，未预约则弹出信息提示
>
> `注：`
>
> 1. `只能预约明天的`
> 2. `新的一天来临所有预约车辆都会重置，需要重新预约`
> 3. `目前车辆数据的重置操作放在该组件当中，即只有教练进入该组件才会进行重置，除非由管理员进行重置`

## 练车时间安排

> 若教练为第一次安排练车时间，则会显示默认信息
>
> 1. 练车日期：空
> 2. 每日开始时间：08: 00 -早上八点
> 3. 每日结束时间：17: 00 -下午五点
> 4. 间隔时间：02: 00  连个小时（同一时间段内学员的练车时长）
> 5. 人数限制：2人  
>
> 若教练不是第一次安排练车时间，默认信息则会显示教练的练车时间安排
>
> 要求：
>
> 1. 练车日期：最长日期时间不能超过 7 天（小于等于 7）
> 2. 每日练车时间：设置每天练车的开始时间和结束时间
> 3. 间隔时间限制：1小时或2小时
> 4. 间隔时间内学员人数显示：间隔时间内可以由多少人数进行练车
>
> 其他：
>
> 1. 只有点击修改信息按钮才可以修改练车时间安排
> 2. 在没有保存信息的前提下取消修改，则会显示默认信息

## 学员预约情况

> 1. 显示学员预约记录
> 2. 确认预约：对学员的预约申请进行确认，方便学员练车
> 3. 删除预约：删除学员的预约申请
> 4. 为方便教练添加了显示今天与明天预约记录的功能，显示今天预约记录则是方便用户查看或确认今天的练车学员有哪些，显示明天预约记录则是方便教练确认学员的预约申请

# 后台管理端

## 系统管理

### 账户管理

> 2. 获取所有账户信息
> 2. 检索：根据用户名进行搜索
> 3. 排序：对创建日期进行升序或降序排序
> 4. 修改账户信息：只能修改密码
> 5. 删除账户信息：伪删除账户信息，同时伪删除对应用户信息
>    1. 管理员账户不能删除
>    2. 已经注销的账户不能删除

### 角色管理

> 1.  显示角色信息
> 2.  修改角色信息：修改角色描述信息
> 3.  展开行：显示角色拥有的权限，同时可以删除权限
> 4.  分配权限：为角色添加权限

### 权限管理

> 显示权限信息（名称、路径、级别）
>
> 权限要求：
>
> 1. 在进入每一个页面之前都需要进行一级权限的判定，没有权限则不能进入该页面
> 2. 每个页面都拥有二级权限，在进行某一项操作如编辑、删除等都需要进行二级权限的判定，没有则无法完成该项操作的功能
> 3. 学员的个人信息、教练的个人信息、管理员的账户信息这一级权限不能删除，原因则是这些页面登录后跳转显示的页面，若没有这些权限，登录后无法跳转页面，只能弹出没有权限的提示
> 4. 二级权限中查看的权限不能删除，如果要删除只能删除对应的一级权限

### 控制面板

#### 学员管理

> 1. 显示所有学员信息
> 2. 检索：根据学员姓名进行搜索
> 3. 排序：根据学员领证日期进行升序或降序排序
> 4. 添加学员：添加学员信息，自动生成账户信息
>    1. 用户名为身份证号
>    2. 密码为：j + 身份证号后六位
> 5. 编辑学员：可以修改学员电话、地址、领证日期
> 6. 删除学员：删除学员信息，同时删除账户信息
>    1. 学员删除后会对教练的学员预约造成影响，在这里不做处理
>    2. 若要处理，删除学员预约即可

## 车辆管理

> 1. 显示所有车辆信息
> 2. 检索：根据车牌号进行搜索
> 3. 添加车辆：车牌号、注册日期、有效日期、保险日期
> 4. 修改车辆：修改保险日期、报废日期、预约日期、使用次数、是否已预约
>    1. 已注销的车辆不能修改
> 5. 删除车辆
>    1. 已注销的车辆不能删除
> 6. 分配教练：将车辆分配给教练使用，使用时间仅为第二天，不能再次分配给其他车辆
> 7. 取消分配：取消已分配给教练使用的车辆，若预约日期未到使用次数需要减1
>
> `注：`
>
> 1. `当新的一天来临表示车辆的预约日期已过，需要对预约车辆数据进行重置`
> 2. `目前对预约车辆重置操作放在该组件下，也可以放入账户管理组件中`

## 教练员管理

> 1. 显示所有教练信息
> 2. 检索：根据教练姓名进行搜索
> 3. 添加教练，同时添加默认账户信息
>    1. 用户名：身份证号
>    2. 密码：j + 身份证号后六位
> 4. 修改教练：可以修改电话、教龄
> 5. 删除教练：删除教练信息，同时删除账户信息
>    1. 教练删除后会对学员预约造成影响，在这里不做处理
>    2. 若要处理，可以对教练重新分配教练，预约中的教练编号也要修改

## 统计分析

### 车辆使用情况

> 以柱状图的形式显示车辆的使用次数
>
> 柱状图可以根据页面的变化进行大小的调整

### 教练教学情况

> 以进度条的形式显示教练教学进度
>
> 通过计时器按每页5条数据的形式循环呈现教练教学进度

# 数据库设计

## 逻辑结构设计

> 账户：{编号，用户名，密码，角色，创建时间}
> 学员：{编号，身份证号，姓名，性别，电话，住址，领证日期，申请车型，教练名，教练编号}
> 教练：{编号，身份证号，姓名，性别，电话，预约车辆，教学进度，教龄}
> 角色：{编号，角色名，角色名(英文)，角色描述}
> 权限：{编号，权限名称，权限路径，级别，父级权限编号，角色编号}
> 车辆：{编号，车牌号，注册日期，有效日期，保险日期，报废日期，预约日期，使用次数}
> 练车安排：{编号，身份证号，姓名，开始日期，结束日期，开始时间，结束时间，时间间隔，人数限制}
> 学员预约：{编号，身份证号，姓名，预约日期，预约时间段，提交时间，确认时间，教练编号}

## 物理结构设计

**账户表**`user`**结构设计**

| 参数          | 类型          | 描述       | 备注          |
| :------------ | :------------ | :--------- | :------------ |
| `id`          | `int`         | 账户编号   | 主键，自增    |
| `username`    | `varchar(18)` | 用户名     | 不能为空      |
| `password`    | `varchar(16)` | 密码       | 不能为空      |
| `rolename`    | `varchar(8)`  | 角色名     | 不能为空      |
| `create_time` | `datetime`    | 创建时间   | 不能为空      |
| `isdel`       | `smallint`    | 是否被删除 | 是(1) / 否(0) |

**学员表**`student`**结构设计**

| 参数            | 类型          | 描述       | 备注        |
| :-------------- | :------------ | :--------- | :---------- |
| `id`            | `int`         | 编号       | 自增，主键  |
| `identify`      | `varchar(18)` | 身份证号   | 不能为空    |
| `name`          | `varchar(5)`  | 姓名       | 不能为空    |
| `sex`           | `varchar(2)`  | 性别       | 不能为空    |
| `phone`         | `varchar(11)` | 电话       | 不能为空    |
| `address`       | `varchar(50)` | 住址       | 不能为空    |
| `model`         | `varchar(2)`  | 申请车型   | 不能为空    |
| `issuance_date` | `date`        | 领证日期   |             |
| `coach_name`    | `varchar(5)`  | 教练姓名   | 不能为空    |
| `coach_id`      | `int`         | 教练编号   | 不能为空    |
| `isdel`         | `smallint`    | 是否被删除 | 是(1)/否(0) |

 **教练表**`coach`**结构设计**

| 参数          | 类型          | 描述             | 备注        |
| ------------- | ------------- | ---------------- | ----------- |
| `id`          | `int`         | 编号             | 自增，主键  |
| `identify`    | `varchar(18)` | 身份证号         | 不能为空    |
| `name`        | `varchar(5)`  | 姓名             | 不能为空    |
| `sex`         | `varchar(2)`  | 性别             | 不能为空    |
| `phone`       | `varchar(11)` | 电话             | 不能为空    |
| `reverse_car` | `varchar(10)` | 预约车辆车牌号   |             |
| `isArranged`  | `smallint`    | 是否安排练车时间 | 是(1)/否(0) |
| `progress`    | `smallint`    | 教学进度         | 不能为空    |
| `years`       | `smallint`    | 教龄             | 不能为空    |
| `isdel`       | `smallint`    | 是否被删除       | 是(1)/否(0) |

 **车辆表**`car`**结构设计**

| 参数             | 类型          | 描述       | 备注        |
| ---------------- | ------------- | ---------- | ----------- |
| `id`             | `int`         | 编号       | 自增，主键  |
| `car_number`     | `varchar(10)` | 车牌号     | 不能为空    |
| `logon_date`     | `date`        | 注册日期   | 不能为空    |
| `valid_date`     | `date`        | 有效日期   | 不能为空    |
| `insurance_date` | `date`        | 保险日期   | 不能为空    |
| `scrap_date`     | `date`        | 报废日期   |             |
| `appoint_date`   | `date`        | 预约日期   |             |
| `count`          | `int`         | 使用次数   | 不能为空    |
| `isuse`          | `smallint`    | 是否被预约 | 不能为空    |
| `isdel`          | `smallint`    | 是否被删除 | 是(1)/否(0) |

**表****4.5** **角色表****role****结构设计**

| 参数           | 类型          | 描述         | 备注       |
| -------------- | ------------- | ------------ | ---------- |
| `id`           | `int`         | 编号         | 自增，主键 |
| `role_name`    | `varchar(5)`  | 角色名       | 不能为空   |
| `role_name_en` | `varchar(10)` | 角色名(英文) | 不能为空   |
| `role_desc`    | `varchar(20)` | 角色描述     | 不能为空   |

**表****4.6** **练车安排表****arrange****结构设计**

| 参数            | 类型          | 描述     | 备注       |
| --------------- | ------------- | -------- | ---------- |
| `id`            | `int`         | 编号     | 自增，主键 |
| `identify`      | `varchar(18)` | 身份证号 | 不能为空   |
| `name`          | `varchar(5)`  | 教练姓名 | 不能为空   |
| `start_date`    | `date`        | 开始日期 | 不能为空   |
| `end_date`      | `date`        | 结束日期 | 不能为空   |
| `start_time`    | `varchar(5)`  | 开始时间 | 不能为空   |
| `end_time`      | `varchar(5)`  | 结束时间 | 不能为空   |
| `interval_time` | `varchar(5)`  | 时间间隔 | 不能为空   |
| `number_limit`  | `smallint`    | 人数限制 | 不能为空   |

**表****4.7** **学员预约表****reverse****结构设计**

| 参数                   | 类型          | 描述             | 备注        |
| ---------------------- | ------------- | ---------------- | ----------- |
| `id`                   | `int`         | 编号             | 自增，主键  |
| `identify`             | `varchar(18)` | 身份证号         | 不能为空    |
| `name`                 | `varchar(5)`  | 学员姓名         | 不能为空    |
| `select_date`          | `date`        | 预约日期         | 不能为空    |
| `select_interval_time` | `varchar(5)`  | 预约时间段       | 不能为空    |
| `submit_time`          | `datetime`    | 学员提交时间     | 不能为空    |
| `confirm_time`         | `datetime`    | 教练确认时间     | 不能为空    |
| `issure`               | `smallint`    | 教练是否确认预约 | 是(1)/否(0) |
| `coach_id`             | `int`         | 教练编号         | 不能为空    |
